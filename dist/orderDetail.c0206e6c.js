!function(e,t,r,n,o){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof a[n]&&a[n],s=i.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,r){if(!s[t]){if(!e[t]){var o="function"==typeof a[n]&&a[n];if(!r&&o)return o(t,!0);if(i)return i(t,!0);if(u&&"string"==typeof t)return u(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}c.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},c.cache={};var p=s[t]=new l.Module(t);e[t][0].call(p.exports,c,p,p.exports,this)}return s[t].exports;function c(e){var t=c.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=s,l.parent=i,l.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(l,"root",{get:function(){return a[n]}}),a[n]=l;for(var d=0;d<t.length;d++)l(t[d])}({gxkHk:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"orderDetails",()=>l);var o=e("@xatom/core"),a=e("../auth"),i=e("../supbase"),s=n.interopDefault(i);let u=()=>{let e=new o.WFComponent("[xa-type=cta-btn]");e.on("click",t=>{t.preventDefault(),e.setTextContent("Please wait..."),(0,a.logout)()}),e.setTextContent("Logga ut")},l=async()=>{u();let e=(0,a.userAuth).getUser().id,t=new o.WFComponent('[xa-type="order-details"]'),r=null;try{let{data:n,error:a}=await (0,s.default).from("Order").select("*").eq("user_id",e).eq("is_complete",!1).single();if(a||!n){t.setHTML("<p>No active order found.</p>");return}r=n;let{bestallning:i,datum:u,varderingsnummer:l,summa:d,angeratt:p,totalgrampurchased:c,kvittolink:f}=t.getManyChildAsComponents({kvittolink:"[xa-type=pdf-link]",bestallning:"[xa-type=bestallning]",datum:"[xa-type=datum]",varderingsnummer:"[xa-type=varderingsnummer]",summa:"[xa-type=summa]",angeratt:"[xa-type=angerrÃ¤tt]",totalgrampurchased:"[xa-type=totalgrampurchased]"});i.setTextContent(r.barcodeid.toFixed(0)),u.setTextContent(r.order_date),l.setTextContent(r.valuation_number),d.setTextContent(r.amount.toFixed(2)),p.setTextContent(r.cancellation_right_period),c.setTextContent(r.total_gram_purchased.toFixed(2)),f.setAttribute("href",r.recipe_download_link);let{data:g,error:m}=await (0,s.default).from("order_status").select("*").eq("order_id",r.id).order("created_at",{ascending:!1}).single();if(m){console.error("Error fetching order status:",m);return}let x=g.step||1,h=g.substep||1,y=g.kuvert_mottagen?(e=>{let t=new Date(e),r=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear(),a=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${r}.${n}.${o} ${a}:${i}`})(g.kuvert_mottagen):"Not available";new o.WFComponent('[xa-type="step"]').setTextContent(`${x}`),new o.WFComponent('[xa-type="substep"]').setTextContent(`${h}`),new o.WFComponent('[xa-type="kuvertmottagen"]').setTextContent(y)}catch(e){console.error("Error fetching order details or status:",e)}};l()},{"@xatom/core":"5eqAK","../auth":"apxUl","../supbase":"54PYi","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequire89a0");
//# sourceMappingURL=orderDetail.c0206e6c.js.map
